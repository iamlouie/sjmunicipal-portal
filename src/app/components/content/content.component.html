<div class="section-head">
  <h2 class="welcome-head animate-in" aria-label="Welcome message">Welcome to San Juan <em>Cabalian</em> Municipal Portal</h2>
</div>
<div class="intro-bar animate-in-delayed">
  <p class="welcome-tag">Streamlining services, insights, and operations for our community.</p>
</div>
<section class="welcome position-relative">
  <div class="inner hero-panel">
  <div class="c-carousel" role="region" aria-label="Municipal showcase" (mouseenter)="pause()" (mouseleave)="resume()">
      <div class="c-slides">
        <figure *ngFor="let s of slides; let i = index" class="c-slide" [class.active]="i===current" [attr.aria-hidden]="i===current ? 'false':'true'">
          <ng-container [ngSwitch]="s.type">
            <img *ngSwitchCase="'image'" [src]="s.src" [alt]="s.alt" />
            <div *ngSwitchCase="'video'" class="c-video-wrap">
              <video #vid [attr.title]="s.alt" playsinline controls class="c-video" preload="metadata" (play)="onVideoPlay()" (pause)="onVideoPause()" (ended)="onVideoEnded()">
                <source [src]="s.src" type="video/mp4" />
                {{ s.alt }}
              </video>
              <button
                type="button"
                class="video-inline-play"
                *ngIf="i===current && showPlayOverlay"
                (click)="playCurrentVideo()"
                aria-label="Play video"
              >
                <span aria-hidden="true">▶</span>
              </button>
            </div>
          </ng-container>
          <figcaption class="c-caption d-none d-sm-inline-block">
            <h5 class="c-cap-title">{{ s.title || s.alt }}</h5>
            <p class="c-cap-tag" *ngIf="s.tagline">{{ s.tagline }}</p>
          </figcaption>
        </figure>
      </div>
      <button type="button" class="c-nav prev" (click)="prev()" aria-label="Previous slide">‹</button>
      <button type="button" class="c-nav next" (click)="next()" aria-label="Next slide">›</button>
      <div class="c-dots" role="tablist">
        <button *ngFor="let s of slides; let i = index" type="button" class="c-dot" [class.active]="i===current" (click)="go(i)" [attr.aria-label]="'Go to slide ' + (i+1)" [attr.aria-selected]="i===current"></button>
      </div>
  <span class="visually-hidden" aria-live="polite">Slide {{ current+1 }} of {{ slides.length }}: {{ slides[current].alt }}</span>
    </div>
  </div>
</section>
<section class="dashboard-cards" aria-label="Key metrics overview">
  <div class="cards-grid">
    <div class="card metric">
      <h3><span class="metric__icon" aria-hidden="true">👥</span>Population</h3>
      <p class="metric__value">15,912</p>
      <p class="metric__delta positive">+2.1% YoY</p>
    </div>
    <div class="card metric">
      <h3><span class="metric__icon" aria-hidden="true">📄</span>Active Permits</h3>
      <p class="metric__value">1,284</p>
      <p class="metric__delta neutral">On Track</p>
    </div>
    <div class="card metric">
      <h3><span class="metric__icon" aria-hidden="true">🛠️</span>Open Projects</h3>
      <p class="metric__value">87</p>
      <p class="metric__delta warning">+12 pending</p>
    </div>
    <div class="card metric">
      <h3><span class="metric__icon" aria-hidden="true">📬</span>Resident Requests</h3>
      <p class="metric__value">56</p>
      <p class="metric__delta">Updated hourly</p>
    </div>
  </div>
</section>

<!-- Mission & Vision Section -->
<section class="mv-section" aria-labelledby="mv-title">
  <div class="mv-grid">
    <div class="mv-block mv-block--mission" aria-label="Municipal mission statement">
      <h3 id="mv-title" class="mv-heading">Mission</h3>
      <p class="mv-text">{{ mission }}</p>
    </div>
    <div class="mv-block mv-block--vision" aria-label="Municipal vision statement">
      <h3 class="mv-heading">Vision</h3>
      <p class="mv-text">{{ vision }}</p>
    </div>
  </div>
</section>

<!-- Core Values -->
<section class="values-section" aria-labelledby="values-title">
  <h3 id="values-title" class="section-subhead">Core Values</h3>
  <div class="values-grid">
    <article class="value" *ngFor="let v of coreValues; trackBy: trackByIndex" [attr.aria-label]="'Core value: ' + v.title">
      <div class="value__icon" aria-hidden="true">{{ v.icon }}</div>
      <h4 class="value__title">{{ v.title }}</h4>
      <p class="value__desc">{{ v.desc }}</p>
    </article>
  </div>
</section>

<!-- Strategic Priorities -->
<section class="priorities-section" aria-labelledby="priorities-title">
  <h3 id="priorities-title" class="section-subhead">Strategic Priorities</h3>
  <div class="priorities-grid">
    <article class="priority" *ngFor="let p of strategicPriorities; trackBy: trackByIndex" [attr.aria-label]="'Priority: ' + p.title">
      <div class="priority__icon" aria-hidden="true">{{ p.icon }}</div>
      <h4 class="priority__title">{{ p.title }}</h4>
      <p class="priority__detail">{{ p.detail }}</p>
    </article>
  </div>
</section>
