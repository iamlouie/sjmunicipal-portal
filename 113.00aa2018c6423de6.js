"use strict";(self.webpackChunkmunicipal_management=self.webpackChunkmunicipal_management||[]).push([[113],{9113:(k,c,l)=>{l.r(c),l.d(c,{PermitsComponent:()=>F});var f=l(467),e=l(4438),d=l(177),a=l(4341),b=l(2319);function C(r,s){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"label",19)(2,"span",10),e.EFF(3,"Business Name *"),e.k0s(),e.j41(4,"input",20),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessApplication","businessName",t))}),e.k0s()(),e.j41(5,"label",21)(6,"span",10),e.EFF(7,"Owner Name *"),e.k0s(),e.j41(8,"input",22),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessApplication","ownerName",t))}),e.k0s()(),e.j41(9,"label",19)(10,"span",10),e.EFF(11,"Business Address *"),e.k0s(),e.j41(12,"input",23),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessApplication","address",t))}),e.k0s()(),e.j41(13,"label",21)(14,"span",10),e.EFF(15,"Nature of Business *"),e.k0s(),e.j41(16,"input",24),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessApplication","nature",t))}),e.k0s()(),e.j41(17,"label",21)(18,"span",10),e.EFF(19,"Capital Investment *"),e.k0s(),e.j41(20,"input",25),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessApplication","capital",t))}),e.k0s()(),e.bVm()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("ngModel",n.form().businessApplication.businessName),e.R7$(4),e.Y8G("ngModel",n.form().businessApplication.ownerName),e.R7$(4),e.Y8G("ngModel",n.form().businessApplication.address),e.R7$(4),e.Y8G("ngModel",n.form().businessApplication.nature),e.R7$(4),e.Y8G("ngModel",n.form().businessApplication.capital)}}function h(r,s){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"label",19)(2,"span",10),e.EFF(3,"Registered Business Name *"),e.k0s(),e.j41(4,"input",26),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessRenewal","businessName",t))}),e.k0s()(),e.j41(5,"label",21)(6,"span",10),e.EFF(7,"Previous Permit No. *"),e.k0s(),e.j41(8,"input",27),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessRenewal","previousPermitNo",t))}),e.k0s()(),e.j41(9,"label",21)(10,"span",10),e.EFF(11,"Gross Sales (Last Year) *"),e.k0s(),e.j41(12,"input",28),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessRenewal","grossSales",t))}),e.k0s()(),e.j41(13,"label",19)(14,"span",10),e.EFF(15,"Owner Contact *"),e.k0s(),e.j41(16,"input",29),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("businessRenewal","ownerContact",t))}),e.k0s()(),e.bVm()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("ngModel",n.form().businessRenewal.businessName),e.R7$(4),e.Y8G("ngModel",n.form().businessRenewal.previousPermitNo),e.R7$(4),e.Y8G("ngModel",n.form().businessRenewal.grossSales),e.R7$(4),e.Y8G("ngModel",n.form().businessRenewal.ownerContact)}}function x(r,s){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"label",19)(2,"span",10),e.EFF(3,"Project Title *"),e.k0s(),e.j41(4,"input",30),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("buildingApplication","projectTitle",t))}),e.k0s()(),e.j41(5,"label",19)(6,"span",10),e.EFF(7,"Project Location *"),e.k0s(),e.j41(8,"input",31),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("buildingApplication","location",t))}),e.k0s()(),e.j41(9,"label",21)(10,"span",10),e.EFF(11,"Estimated Cost *"),e.k0s(),e.j41(12,"input",32),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("buildingApplication","estimatedCost",t))}),e.k0s()(),e.j41(13,"label",21)(14,"span",10),e.EFF(15,"Contractor *"),e.k0s(),e.j41(16,"input",33),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("buildingApplication","contractor",t))}),e.k0s()(),e.j41(17,"label",21)(18,"span",10),e.EFF(19,"Owner Name *"),e.k0s(),e.j41(20,"input",34),e.bIt("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.Njj(o.updateNested("buildingApplication","ownerName",t))}),e.k0s()(),e.bVm()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("ngModel",n.form().buildingApplication.projectTitle),e.R7$(4),e.Y8G("ngModel",n.form().buildingApplication.location),e.R7$(4),e.Y8G("ngModel",n.form().buildingApplication.estimatedCost),e.R7$(4),e.Y8G("ngModel",n.form().buildingApplication.contractor),e.R7$(4),e.Y8G("ngModel",n.form().buildingApplication.ownerName)}}function M(r,s){if(1&r&&(e.j41(0,"div",35)(1,"button",36),e.EFF(2,"Submit"),e.k0s()()),2&r){const n=e.XpG();e.R7$(),e.Y8G("disabled",!n.canSubmit()||n.submitting())}}function P(r,s){if(1&r&&(e.j41(0,"p",47),e.EFF(1),e.k0s()),2&r){const n=s.ngIf;e.R7$(),e.JRh(n)}}function w(r,s){if(1&r&&(e.j41(0,"li",41)(1,"div",42),e.EFF(2),e.k0s(),e.j41(3,"div",43)(4,"p",44),e.EFF(5),e.k0s(),e.DNE(6,P,2,1,"p",45),e.j41(7,"p",46),e.EFF(8),e.nI1(9,"date"),e.k0s()()()),2&r){const n=s.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(n.id),e.R7$(3),e.JRh(i.labelFor(n.type)),e.R7$(),e.Y8G("ngIf",i.primaryName(n)),e.R7$(2),e.JRh(e.i5U(9,4,n.createdAt,"short"))}}function j(r,s){if(1&r&&(e.j41(0,"div",37)(1,"h3",38),e.EFF(2,"Recent Requests"),e.k0s(),e.j41(3,"ul",39),e.DNE(4,w,10,7,"li",40),e.k0s()()),2&r){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.requests())("ngForTrackBy",n.trackByReq)}}function y(r,s){1&r&&(e.j41(0,"p",48),e.EFF(1,"No submissions yet."),e.k0s())}let F=(()=>{class r{constructor(n){this.confirm=n,this.form=(0,e.vPA)({type:"",businessApplication:{businessName:"",ownerName:"",address:"",nature:"",capital:""},businessRenewal:{businessName:"",previousPermitNo:"",grossSales:"",ownerContact:""},buildingApplication:{projectTitle:"",location:"",estimatedCost:"",contractor:"",ownerName:""}}),this.submitting=(0,e.vPA)(!1),this.requests=(0,e.vPA)([]),this.canSubmit=(0,e.EWP)(()=>{const i=this.form();switch(i.type){case"business-application":{const t=i.businessApplication;return t.businessName.trim()&&t.ownerName.trim()&&t.address.trim()&&t.nature.trim()&&t.capital.trim()}case"business-renewal":{const t=i.businessRenewal;return t.businessName.trim()&&t.previousPermitNo.trim()&&t.grossSales.trim()&&t.ownerContact.trim()}case"building-application":{const t=i.buildingApplication;return t.projectTitle.trim()&&t.location.trim()&&t.estimatedCost.trim()&&t.contractor.trim()&&t.ownerName.trim()}default:return!1}}),this.trackByReq=(i,t)=>t.id}submit(n){var i=this;return(0,f.A)(function*(){if(!i.canSubmit()||!(yield i.confirm.open({title:"Submit Permit Request",message:"Verify applicant information and purpose (if any). Continue submitting?",confirmText:"Submit",cancelText:"Review"})))return;i.submitting.set(!0);const o=i.form(),m=i.generateRef(o.type.startsWith("business")?"business-renewal"===o.type?"BIZR":"BIZA":"BLDG"),p=i.selectPayload(o),O={id:m,type:o.type,payload:p,createdAt:new Date};i.requests.update(N=>[O,...N]),i.form.set({type:"",businessApplication:{businessName:"",ownerName:"",address:"",nature:"",capital:""},businessRenewal:{businessName:"",previousPermitNo:"",grossSales:"",ownerContact:""},buildingApplication:{projectTitle:"",location:"",estimatedCost:"",contractor:"",ownerName:""}}),setTimeout(()=>n.resetForm({type:""}),0),setTimeout(()=>i.submitting.set(!1),300)})()}generateRef(n){const i=new Date;return`${n}-${i.getFullYear().toString().slice(-2)}${(i.getMonth()+1).toString().padStart(2,"0")}${i.getDate().toString().padStart(2,"0")}-${Math.random().toString(36).slice(2,6).toUpperCase()}`}labelFor(n){return{"business-application":"Business Permit (Application)","business-renewal":"Business Permit (Renewal)","building-application":"Building Permit (Application)"}[n]||"Permit"}primaryName(n){switch(n.type){case"business-application":case"business-renewal":return n.payload.businessName||void 0;case"building-application":return n.payload.projectTitle||void 0;default:return}}updateField(n,i){this.form.update(t=>({...t,[n]:i}))}updateNested(n,i,t){this.form.update(o=>({...o,[n]:{...o[n],[i]:t}}))}selectPayload(n){switch(n.type){case"business-application":default:return n.businessApplication;case"business-renewal":return n.businessRenewal;case"building-application":return n.buildingApplication}}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(b.G))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-permits"]],standalone:!0,features:[e.aNF],decls:31,vars:7,consts:[["permForm","ngForm"],["empty",""],[1,"section-head"],["aria-label","Permits heading",1,"welcome-head","animate-in"],[1,"intro-bar","animate-in-delayed"],[1,"intro-bar__text"],["aria-label","Permit request form and recent submissions",1,"permits"],["novalidate","",1,"req-form",3,"ngSubmit"],[1,"form-grid"],[1,"field","field--type"],[1,"field__label"],["name","type","required","",1,"field__control",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","business-application"],["value","business-renewal"],["value","building-application"],[4,"ngIf"],["class","actions actions--lower",4,"ngIf"],["class","recent","aria-label","Recent permit requests",4,"ngIf","ngIfElse"],[1,"field","field--full"],["required","","name","bizNameApp",1,"field__control",3,"ngModelChange","ngModel"],[1,"field"],["required","","name","ownerNameApp",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","addressApp",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","natureApp",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","capitalApp",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","bizNameRenew",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","prevPermit",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","grossSales",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","ownerContactRenew",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","projectTitle",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","locationBldg",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","costBldg",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","contractorBldg",1,"field__control",3,"ngModelChange","ngModel"],["required","","name","ownerNameBldg",1,"field__control",3,"ngModelChange","ngModel"],[1,"actions","actions--lower"],["type","submit",1,"btn-primary",3,"disabled"],["aria-label","Recent permit requests",1,"recent"],[1,"recent__title"],["role","list",1,"recent__list"],["class","recent__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"recent__item"],[1,"recent__ref"],[1,"recent__body"],[1,"recent__kind"],["class","recent__name",4,"ngIf"],[1,"recent__time"],[1,"recent__name"],[1,"empty-note"]],template:function(i,t){if(1&i){const o=e.RV6();e.j41(0,"div",2)(1,"h2",3),e.EFF(2,"Municipal "),e.j41(3,"em"),e.EFF(4,"Permits"),e.k0s()()(),e.j41(5,"div",4)(6,"p",5),e.EFF(7,"Guidelines, processing, and status for business, construction, and activity permits."),e.k0s()(),e.j41(8,"section",6)(9,"form",7,0),e.bIt("ngSubmit",function(){e.eBV(o);const p=e.sdS(10);return e.Njj(t.submit(p))}),e.j41(11,"div",8)(12,"label",9)(13,"span",10),e.EFF(14,"Request Type *"),e.k0s(),e.j41(15,"select",11),e.bIt("ngModelChange",function(p){return e.eBV(o),e.Njj(t.updateField("type",p))}),e.j41(16,"option",12),e.EFF(17,"Select..."),e.k0s(),e.j41(18,"option",13),e.EFF(19,"Business Permit Application"),e.k0s(),e.j41(20,"option",14),e.EFF(21,"Business Permit Renewal"),e.k0s(),e.j41(22,"option",15),e.EFF(23,"Building Permit Application"),e.k0s()()(),e.DNE(24,C,21,5,"ng-container",16)(25,h,17,4,"ng-container",16)(26,x,21,5,"ng-container",16),e.k0s(),e.DNE(27,M,3,1,"div",17),e.k0s(),e.DNE(28,j,5,2,"div",18)(29,y,2,0,"ng-template",null,1,e.C5r),e.k0s()}if(2&i){const o=e.sdS(30);e.R7$(15),e.Y8G("ngModel",t.form().type),e.R7$(9),e.Y8G("ngIf","business-application"===t.form().type),e.R7$(),e.Y8G("ngIf","business-renewal"===t.form().type),e.R7$(),e.Y8G("ngIf","building-application"===t.form().type),e.R7$(),e.Y8G("ngIf",t.form().type),e.R7$(),e.Y8G("ngIf",t.requests().length)("ngIfElse",o)}},dependencies:[d.pM,d.bT,a.YN,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,a.YS,a.vS,a.cV,d.vh],styles:['.welcome-head[_ngcontent-%COMP%]{position:relative;margin:0 0 .55rem;font-size:clamp(1.15rem,1.9vw + .6rem,2.1rem);font-weight:700;letter-spacing:.55px;color:#1e2766;line-height:1.18;text-shadow:0 2px 6px rgba(0,0,0,.05);padding-left:1rem}.welcome-head[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:8%;width:5px;height:84%;border-radius:3px;background:linear-gradient(180deg,#2563eb,#4f46e5 60%,#7c3aed);box-shadow:0 0 0 1px #ffffff4d,0 4px 10px -3px #00000040}.intro-bar[_ngcontent-%COMP%]{margin:0 0 1.25rem}.intro-bar__text[_ngcontent-%COMP%]{margin:0;font-size:clamp(.8rem,.45vw + .7rem,1rem);line-height:1.5;color:#475569;letter-spacing:.38px;max-width:820px;padding-left:1rem;position:relative}.intro-bar__text[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:.5rem;width:5px;height:calc(100% - .9rem);background:linear-gradient(180deg,#2563eb,#4f46e5 65%,#7c3aed);border-radius:3px;opacity:.15}@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(14px)}55%{opacity:1}to{opacity:1;transform:translateY(0)}}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .85s cubic-bezier(.16,.72,.29,1) both}.animate-in-delayed[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .85s .18s cubic-bezier(.16,.72,.29,1) both}@media (max-width:640px){.welcome-head[_ngcontent-%COMP%]{font-size:clamp(1.28rem,2.8vw + .72rem,2.15rem)}.intro-bar__text[_ngcontent-%COMP%]{font-size:.78rem;line-height:1.42}}@media (max-width:420px){.intro-bar__text[_ngcontent-%COMP%]{font-size:.74rem}}.req-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f1f5f9 70%);border:1px solid #e2e8f0;padding:1.55rem 1.7rem 1.85rem;border-radius:18px;box-shadow:0 6px 18px -8px #0000002e;margin:0 0 1.4rem;transition:padding .25s ease,border-radius .25s ease}.req-form[_ngcontent-%COMP%]{max-width:860px;margin:0 auto 1.2rem;width:100%}@media (min-width:1280px){.req-form[_ngcontent-%COMP%]{max-width:900px}}@media (max-width:720px){.req-form[_ngcontent-%COMP%]{padding:1.2rem 1.15rem 1.35rem;border-radius:17px;margin:0 auto 1.25rem}}@media (max-width:560px){.req-form[_ngcontent-%COMP%]{padding:1rem .95rem 1.15rem;border-radius:16px}}@media (max-width:420px){.req-form[_ngcontent-%COMP%]{padding:.85rem .78rem 1rem;border-radius:14px}}.form-grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));padding-left:.4rem}@media (min-width:900px){.form-grid[_ngcontent-%COMP%]{padding-left:.55rem}}@media (max-width:560px){.form-grid[_ngcontent-%COMP%]{padding-left:.25rem}}@media (max-width:640px){.form-grid[_ngcontent-%COMP%]{gap:.9rem}}@media (max-width:480px){.form-grid[_ngcontent-%COMP%]{gap:.82rem}}@media (max-width:400px){.form-grid[_ngcontent-%COMP%]{gap:.75rem}}@media (max-width: 900px) and (min-width:721px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.field--full[_ngcontent-%COMP%]{grid-column:1/-1}.field--type[_ngcontent-%COMP%]{max-width:210px}.field__label[_ngcontent-%COMP%]{font-size:.6rem;letter-spacing:.55px;font-weight:600;text-transform:uppercase;color:#334155}.field__control[_ngcontent-%COMP%]{font:inherit;padding:.55rem .65rem;border-radius:10px;border:1px solid #cbd5e1;background:#fff;font-size:.7rem;letter-spacing:.4px;box-shadow:0 2px 4px -2px #0000001f inset}.field__control[_ngcontent-%COMP%]:focus{outline:2px solid #6366f1;outline-offset:1px}.field--type[_ngcontent-%COMP%]   .field__control[_ngcontent-%COMP%]{width:100%}@media (max-width:540px){.field--type[_ngcontent-%COMP%]{max-width:none;width:100%}}.hint[_ngcontent-%COMP%]{margin:0;font-size:.55rem;letter-spacing:.4px;color:#64748b}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.4rem}.actions--lower[_ngcontent-%COMP%]{margin-top:1.1rem}.btn-primary[_ngcontent-%COMP%]{font:inherit;font-size:.66rem;padding:.5rem .85rem .48rem;border-radius:10px;font-weight:600;letter-spacing:.5px;background:linear-gradient(180deg,#2563eb,#1d4ed8);color:#fff;border:1px solid #1d4ed8;cursor:pointer;box-shadow:0 4px 10px -4px #2563eb80}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed}.recent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border:1px solid #e2e8f0;padding:.85rem .9rem 1rem;border-radius:16px;box-shadow:0 6px 18px -8px #0000002e}.recent__title[_ngcontent-%COMP%]{margin:0 0 .55rem;font-size:.72rem;font-weight:700;letter-spacing:.55px;color:#1e2766;text-transform:uppercase}.recent__list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.55rem}.recent__item[_ngcontent-%COMP%]{display:grid;gap:.55rem;grid-template-columns:100px 1fr;align-items:start;padding:.6rem .65rem .65rem;border:1px solid #e2e8f0;border-radius:12px;background:#fff;box-shadow:0 2px 6px -3px #00000026}.recent__ref[_ngcontent-%COMP%]{font-size:.55rem;font-weight:600;letter-spacing:.5px;color:#334155;background:#e2e8f0;padding:.25rem .35rem .2rem;border-radius:6px;word-break:break-all}.recent__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.recent__kind[_ngcontent-%COMP%]{margin:0;font-size:.6rem;font-weight:600;letter-spacing:.45px;color:#1e2766}.recent__name[_ngcontent-%COMP%]{margin:0;font-size:.57rem;font-weight:500;color:#475569;letter-spacing:.4px}.recent__time[_ngcontent-%COMP%]{margin:0;font-size:.52rem;color:#64748b;letter-spacing:.4px}.recent__purpose[_ngcontent-%COMP%]{margin:0;font-size:.52rem;color:#475569;letter-spacing:.4px}.empty-note[_ngcontent-%COMP%]{margin:0;font-size:.65rem;color:#64748b;letter-spacing:.45px}@media (max-width:620px){.recent__item[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-scroll[_ngcontent-%COMP%]{display:block}@media (max-width: 720px){.form-scroll[_ngcontent-%COMP%]{max-height:62vh;overflow-y:auto;padding-right:.25rem;scrollbar-width:thin}.form-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.form-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.form-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:6px}.form-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}}@media (max-width:400px){.form-scroll[_ngcontent-%COMP%]{max-height:68vh}}']})}}return r})()}}]);